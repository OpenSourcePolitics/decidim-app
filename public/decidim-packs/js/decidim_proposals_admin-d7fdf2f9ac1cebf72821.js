!function(){var t={69173:function(){$((function(){var t=function(){return $(".table-list .js-check-all-proposal:checked").length},e=function(){return $(".table-list [data-published-state=false] .js-check-all-proposal:checked").length},o=function(){var o=t(),n=e();0===o?$("#js-selected-proposals-count").text(""):$("#js-selected-proposals-count").text(o),o>=2?$('button[data-action="merge-proposals"]').parent().show():$('button[data-action="merge-proposals"]').parent().hide(),n>0?($('button[data-action="publish-answers"]').parent().show(),$("#js-form-publish-answers-number").text(n)):$('button[data-action="publish-answers"]').parent().hide()},n=function(){t()>0&&$("#js-bulk-actions-button").removeClass("hide")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0!==t()&&!0!==e||($("#js-bulk-actions-button").addClass("hide"),$("#js-bulk-actions-dropdown").removeClass("is-open"))},c=function(){$("#js-other-actions-wrapper").removeClass("hide")},s=function(){$("#js-other-actions-wrapper").addClass("hide")},l=function(){$(".js-bulk-action-form").addClass("hide")};window.selectedProposalsCount=t,window.selectedProposalsNotPublishedAnswerCount=e,window.selectedProposalsCountUpdate=o,window.showBulkActionsButton=n,window.hideBulkActionsButton=a,window.showOtherActionsButtons=c,window.hideOtherActionsButtons=s,window.hideBulkActionForms=l,$(".js-bulk-action-form").length&&(l(),$("#js-bulk-actions-button").addClass("hide"),$("#js-bulk-actions-dropdown ul li button").click((function(t){t.preventDefault();var e=$(t.target).data("action");e&&($("#js-form-".concat(e)).submit((function(){$(".layout-content > .callout-wrapper").html("")})),$("#js-".concat(e,"-actions")).removeClass("hide"),a(!0),s())})),$(".js-check-all").change((function(){$(".js-check-all-proposal").prop("checked",$(this).prop("checked")),$(this).prop("checked")?($(".js-check-all-proposal").closest("tr").addClass("selected"),n()):($(".js-check-all-proposal").closest("tr").removeClass("selected"),a()),o()})),$(".table-list").on("change",".js-check-all-proposal",(function(t){var e=$(this).val(),c=$(this).prop("checked");!1===$(this).prop("checked")&&$(".js-check-all").prop("checked",!1),$(".js-check-all-proposal:checked").length===$(".js-check-all-proposal").length&&($(".js-check-all").prop("checked",!0),n()),$(this).prop("checked")?(n(),$(this).closest("tr").addClass("selected")):(a(),$(this).closest("tr").removeClass("selected")),0===$(".js-check-all-proposal:checked").length&&a(),$(".js-bulk-action-form").find(".js-proposal-id-".concat(e)).prop("checked",c),o()})),$(".js-cancel-bulk-action").on("click",(function(t){l(),n(),c()})))}))},21119:function(){$((function(){var t=$(".picker-content"),e=t.data("picker-more"),o=t.data("picker-path"),n=function(){var t=0===$("#proposals_list li:visible").length;$("#no_proposals").toggle(t)},a=null;n(),$(".data_picker-modal-content").on("change keyup","#proposals_filter",(function(c){var s=c.target.value.toLowerCase();e?(null!==a&&a.abort(),t.html("<div class='loading-spinner'></div>"),a=$.get("".concat(o,"?q=").concat(s),(function(e){t.html(e),a=null,n()}))):($("#proposals_list li").each((function(t,e){$(e).toggle(e.textContent.toLowerCase().indexOf(s)>-1)})),n())}))}))}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}!function(){"use strict";o(69173);function t(t,e,o){var n="".concat(t,"Name");if(o[n])return o[n];var a=e.attr("name"),c=/\[[^\]]+\]$/;return a.match(c)?a.replace(c,"[".concat(t,"]")):t}function e(e,o,n){var a=$.extend({},o),c=e.attr("id").split("_");c.pop();var s="".concat(c.join("_")),l="latitude",i="longitude";e.length>0&&(l=t("latitude",e,a),i=t("longitude",e,a));var r=$.extend({latitudeId:"".concat(s,"_latitude"),longitudeId:"".concat(s,"_longitude"),latitudeName:l,longitudeName:i},o),d=!1,u=function(t){!function(){var t=$("#".concat(r.latitudeId));t.length<1&&(t=$('<input type="hidden" name="'.concat(r.latitudeName,'" id="').concat(r.latitudeId,'" />')),e.after(t));var o=$("#".concat(r.longitudeId));o.length<1&&(o=$('<input type="hidden" name="'.concat(r.longitudeName,'" id="').concat(r.longitudeId,'" />')),e.after(o))}(),$("#".concat(r.latitudeId)).val(t[0]).attr("value",t[0]),$("#".concat(r.longitudeId)).val(t[1]).attr("value",t[1])};e.on("change.decidim",(function(){d||($("#".concat(r.latitudeId)).val("").removeAttr("value"),$("#".concat(r.longitudeId)).val("").removeAttr("value"))})),e.on("geocoder-suggest-coordinates.decidim",(function(t,e){u(e),d=!0,n(e)}));var p="".concat(e.data("coordinates")).split(",").map(parseFloat);Array.isArray(p)&&2===p.length&&u(p)}$((function(){var t=$(".proposal_form_admin");if(t.length>0){var o=t.find("#proposal_created_in_meeting"),n=t.find("#proposal_meeting"),a=function(){var t=o.prop("checked");n.find("select").attr("disabled","disabled"),n.hide(),t&&(n.find("select").attr("disabled",!t),n.show())};o.on("change",a),a();var c=t.find("#proposal_address");0!==c.length&&e(c)}}));o(21119)}()}();
//# sourceMappingURL=decidim_proposals_admin-d7fdf2f9ac1cebf72821.js.map